(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["preview"],{"04b5":function(t,e,n){},7596:function(t,e,n){"use strict";n("04b5")},a64c:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"preview",staticClass:"preview-wrapper",style:t.currentStyle},[n("div",{style:t.buttonBoxStyle},[n("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-close",circle:""},on:{click:t.returnToBase}})],1)])},a=[],o=(n("99af"),n("b0c0"),n("3f86")),c=n("b065"),s=n("9628"),i={components:{},name:"preview",data:function(){return{componentList:[],currentStyle:{},screenStretch:{},screenDef:[],screenDefFlag:!1,screenStretchFlag:!1,backgroundStyleFlag:!1,buttonBoxStyle:{},loadingInstance:null,loadingStatus:!1,loadingDetail:{components:!1,style:!1,stretch:!1,background:!1},stretchMethod:"",backgroundStyle:{}}},computed:{},watch:{screenStretchFlag:function(t){1==this.screenStretch.allStretch?this.stretchMethod="allStretch":1==this.screenStretch.xStretch?this.stretchMethod="xStretch":1==this.screenStretch.yStretch?this.stretchMethod="yStretch":this.stretchMethod="noStretch",1==this.screenStretchFlag&&1==this.screenDefFlag&&1==this.backgroundStyleFlag&&this.resize()},screenDefFlag:function(t){this.buttonBoxStyle={position:"absolute",left:this.screenDef[0].value-40+"px","z-index":1e4},1==this.screenStretchFlag&&1==this.screenDefFlag&&1==this.backgroundStyleFlag&&this.resize()},backgroundStyleFlag:function(t){1==this.screenStretchFlag&&1==this.screenDefFlag&&1==this.backgroundStyleFlag&&this.resize()},loadingStatus:function(t){var e=this;1==t&&this.$nextTick((function(){e.loadingInstance.close()}))},loadingDetail:{handler:function(t){1==t.components&&1==t.style&&1==t.stretch&&1==t.background&&(this.loadingStatus=!0)},deep:!0}},props:["componentName"],created:function(){},mounted:function(){this.loadingInstance=this.$loading({fullscreen:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.8)",text:"正在加载中"}),this.getScreenDef(),this.getScreenStretch(),this.getBackgroundStyle(),this.getComponentList(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{getBackgroundStyle:function(){var t=this;this.$axios({url:s["a"].getBackgroundStyle,method:"post",data:{templateID:this.$store.state.currentTemplateID,userID:this.$store.state.currentUserID}}).then((function(e){t.backgroundStyle=e.data,t.backgroundStyleFlag=!0,t.loadingDetail.background=!0}))},getScreenStretch:function(){var t=this;this.$axios({url:s["a"].getScreenStretch,method:"post",data:{templateID:this.$store.state.currentTemplateID,userID:this.$store.state.currentUserID}}).then((function(e){t.screenStretch=e.data,t.screenStretchFlag=!0,t.loadingDetail.stretch=!0}))},getScreenDef:function(){var t=this;this.$axios({url:s["a"].getScreenDef,method:"post",data:{templateID:this.$store.state.currentTemplateID,userID:this.$store.state.currentUserID}}).then((function(e){t.screenDef=e.data,t.screenDefFlag=!0,t.loadingDetail.style=!0}))},resize:function(){var t=this.screenDef[0].value,e=this.screenDef[1].value;switch(this.stretchMethod){case"allStretch":this.currentStyle={width:t+"px",height:e+"px",transform:"scale(".concat(document.documentElement.clientWidth/t,", \n        ").concat(document.documentElement.clientHeight/e,") translate(0px, 0px)"),overflow:"hidden",backgroundColor:this.backgroundStyle.backgroundColor,backgroundImage:"url('".concat(this.backgroundStyle.backgroundImage,"')"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};break;case"xStretch":this.currentStyle={width:t+"px",height:e+"px",transform:"scale(".concat(document.documentElement.clientWidth/t,", \n        ",1,") translate(0px, 0px)"),"overflow-x":"hidden",backgroundColor:this.backgroundStyle.backgroundColor,backgroundImage:"url('".concat(this.backgroundStyle.backgroundImage,"')"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};break;case"yStretch":this.currentStyle={width:t+"px",height:e+"px",transform:"scale(".concat(1,", \n        ",document.documentElement.clientHeight/e,") translate(0px, 0px)"),"overflow-y":"hidden",backgroundColor:this.backgroundStyle.backgroundColor,backgroundImage:"url('".concat(this.backgroundStyle.backgroundImage,"')"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};break;case"noStretch":this.currentStyle={width:t+"px",height:e+"px",transform:"scale(".concat(1,", \n        ",1,") translate(0px, 0px)"),backgroundColor:this.backgroundStyle.backgroundColor,backgroundImage:"url('".concat(this.backgroundStyle.backgroundImage,"')"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};break}},returnToBase:function(){this.$router.push({path:"/basePage"})},getComponentList:function(){var t=this;this.$axios({url:s["a"].getComponentList,method:"post",data:{templateID:this.$store.state.currentTemplateID}}).then((function(e){t.componentList=e.data.resultSet,t.mountTest(),t.loadingDetail.components=!0}))},mountTest:function(){for(var t=this.componentList,e=this,n=0;n<t.length;n++)Object(c["mount"])(Object(o["a"])(t[n].name),{target:e.$refs.preview,mode:"append",props:{},data:{index:t[n].index,zindex:t[n].zindex,target:this.$refs.target,ifshow:t[n].ifshow,width:t[n].width,height:t[n].height,top:t[n].top,left:t[n].left,deg:t[n].deg,name:t[n].name,parentLimitation:!1,preventActiveBehavior:!0,dataSource:t[n].dataSource,title:t[n].title,subTitle:t[n].subTitle,style:t[n].style,draggable:!1,resizable:!1,mode:"preview",active:!1},on:{}})}}},l=i,h=(n("7596"),n("0c7c")),u=Object(h["a"])(l,r,a,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=preview.ff16a5a5.js.map